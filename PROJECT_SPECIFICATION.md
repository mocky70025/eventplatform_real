# イベントプラットフォーム 仕様書

## 1. プロジェクト概要
イベント主催者とキッチンカー・屋台出店者をスムーズにマッチングするWebプラットフォーム。
「シンプル・洗練・信頼感」をキーワードに、直感的で使いやすいUI/UXを提供する。

### コンセプトカラー
- **主催者**: オレンジ（活気、温かさ）
- **出店者**: グリーン（安心、自然、信頼）

---

## 2. ユーザーロール
### 主催者 (Organizer)
- イベントを企画・運営する個人または団体。
- 出店者を募集し、選定・管理する。

### 出店者 (Store)
- キッチンカーや屋台を運営する個人または事業者。
- イベントを探し、出店を申し込む。

### 管理者 (Admin)
- プラットフォームの運営者。
- 主催者およびイベントの審査・承認を行う。

---

## 3. 主要機能要件

### 共通機能
- **認証機能**:
    - **Open App / Lazy Auth**: ログイン前でもアプリのメイン画面（ダッシュボード等）にアクセス可能。
    - **機能制限**: イベント作成や申し込みなどの特定アクション時に認証を求める。
    - **プロフィール型登録**: アカウント作成時は最小限の情報で開始し、詳細情報（会社名、書類等）は「プロフィール画面」で後から登録する形式。
- **通知機能**: アプリ内通知およびメール通知

### 主催者機能 (Orange Theme)
1.  **ダッシュボード**: 開催予定のイベント、申し込み状況のサマリー表示。
2.  **イベント作成・編集**:
    -   イベント詳細情報の入力（日時、場所、募集要項など）。
    -   画像アップロード。
    -   下書き保存機能。
3.  **出店者管理**:
    -   申し込み一覧の表示。
    -   出店者の詳細・プロフィール確認。
    -   **承認/却下/保留**のステータス管理。
4.  **チャット機能**: 承認された出店者と個別にメッセージのやり取り。

### 出店者機能 (Green Theme)
1.  **イベント検索**: 開催地、日付、ジャンルでの検索。
2.  **プロフィール管理**:
    -   店舗情報、メニュー写真の登録。
    -   **営業許可証等の書類アップロード & AI自動読み取り**（有効期限などを自動抽出）。
3.  **出店申し込み**: ワンクリックでの申し込み申請（プロフィール情報を流用）。
4.  **チャット機能**: 承認されたイベントの主催者とメッセージ連絡。

### 管理者機能
1.  **主催者承認**: 新規登録された主催者の審査。
2.  **イベント承認**: 公開申請されたイベントの内容確認。

---

## 4. 非機能要件
- **決済**: なし（現地払い等の運用とする）。
- **レスポンシブ**: モバイルファーストでデザインし、PCでも快適に利用可能にする。
- **パフォーマンス**: 画像を多く扱うため、最適化と遅延読み込みを徹底する。

---

## 5. データモデル

### 5.1. Users (共通)
- Supabase Authと連携
- `role`: 'organizer' | 'exhibitor' | 'admin'

### 5.2. Profiles: Organizers (主催者)
- `company_name`: 会社・団体名
- `name`: 担当者名
- `gender`: 性別
- `age`: 年齢
- `phone_number`: 電話番号
- `email`: メールアドレス (連絡用)
- `social_links`: SNSリンク (JSON)
- `is_approved`: 承認フラグ

### 5.3. Profiles: Exhibitors (出店者)
- `shop_name`: 店名・屋号
- `name`: 代表者名
- `gender`: 性別
- `age`: 年齢
- `phone_number`: 電話番号
- `email`: メールアドレス
- `genre`: ジャンル (カテゴリ + 自由記述)
- `license_info`: 営業許可証情報 (JSON: 有効期限, 番号など)
- **Documents (画像URL)**:
    - 営業許可証, 車検証, PL保険証書, 火気使用図

### 5.4. Events (イベント)
- **基本情報**:
    - `event_name`: イベント名 & フリガナ
    - `genre`: イベントジャンル
    - `lead_text`: キャッチコピー
    - `description`: イベント詳細説明
- **日時・期間**:
    - `event_start_date` / `event_end_date`: 開催期間
    - `event_time`: 開催時間 (テキスト)
    - `application_period`: 募集期間 (開始日〜終了日)
- **場所**:
    - `venue_name`: 会場名
    - `address`: 住所
    - `location`: 緯度経度 (Map用)
- **募集要項**:
    - `recruit_count`: 募集台数
    - `fee`: 出店料 (テキスト)
    - `requirements`: 出店条件
- **画像**:
    - `main_image`: メイン画像
    - `gallery_images`: サブ画像 (配列)

### 5.5. Applications (申し込み)
- `status`: 'pending' (申請中) | 'approved' (承認) | 'rejected' (却下)
- `message`: 申請時のメッセージ
- `created_at`: 申請日時

### 5.6. Chats (メッセージ)
- `application_id`: 申し込みIDに紐付く
- `messages`: 配列または別テーブルでのメッセージ履歴

---

## 6. 技術スタック (予定)
- **Frontend**: Next.js 14, Tailwind CSS, Lucide React
- **Backend**: Supabase (Auth, DB, Realtime, Storage, Edge Functions)
- **AI**: OpenAI API (GPT-4o mini 等) for Vision
