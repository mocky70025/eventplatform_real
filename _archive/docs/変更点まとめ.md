# 変更点まとめ

## 1. スプレッドシート機能の削除とエクセル形式ダウンロードへの変更

### 削除する機能
- Google Sheets API連携（`export-to-sheets` API）
- スプレッドシートURLの送信機能

### 新規実装
- エクセル形式（.xlsx）でのダウンロード機能
- 出店者情報をエクセル形式でエクスポート
- ダウンロードボタンを追加

### 影響範囲
- `organizer/app/api/events/export-to-sheets/route.ts` → 削除または変更
- `organizer/app/api/events/close-and-export/route.ts` → 変更
- `organizer/app/api/events/send-sheets-email/route.ts` → 削除または変更
- `organizer/components/EventApplications.tsx` → 変更

## 2. 出店者情報の見やすい表示

### 現状
- `EventApplications.tsx` で出店者詳細を表示する機能は既に実装済み

### 改善点
- レイアウトの最適化
- 情報の整理と見やすさの向上
- 書類画像の表示改善

## 3. 営業許可証のAI読み取り機能

### 実装内容
- GPT-4.1miniを使用した画像解析
- 営業許可証の期限を確認
- 期限内なら「yes」、期限外なら「no」を返す

### 新規API
- `POST /api/documents/verify-business-license`
  - リクエスト: 画像URLまたはbase64画像
  - レスポンス: `{ valid: boolean, expiryDate?: string, message: string }`

### 実装場所
- 出店者登録フォーム（`store/components/RegistrationForm.tsx`）
- 営業許可証アップロード時に自動で読み取り

## 4. イベント申し込み時の確認ダイアログ

### 実装内容
- 申し込みボタンを押した時に確認ダイアログを表示
- 「このイベントに申し込みますか？」などの確認メッセージ

### 変更ファイル
- `store/components/EventCard.tsx` の `handleApply` 関数

## 5. イベント承認時の確認ダイアログ

### 実装内容
- 承認/却下ボタンを押した時に確認ダイアログを表示
- 「この申し込みを承認しますか？」などの確認メッセージ

### 変更ファイル
- `organizer/components/EventApplications.tsx` の `handleApplicationApproval` 関数


