# 動作確認手順（詳細版）

## 📋 確認項目一覧

### 主催者アプリ
1. ログイン・新規登録
2. 登録フォーム（確認画面含む）
3. 承認待ち状態での動作
4. イベント作成・編集
5. 出店申し込み管理
6. CSVエクスポート
7. プロフィール編集

### 出店者アプリ
1. ログイン・新規登録
2. 登録フォーム（3ステップ）
3. イベント一覧閲覧
4. イベント申し込み
5. 申し込み状況確認
6. プロフィール編集
7. 通知確認

---

## 🎯 主催者アプリ - 動作確認手順

### 1. 新規登録フロー

#### 1-1. 新規登録開始

**前提条件**: 未登録のGoogleアカウントまたはメールアドレスを用意

**手順**:
1. 主催者アプリにアクセス（`http://localhost:3002` または本番URL）
2. 初期画面（WelcomeScreen）が表示される
3. 画面の構成を確認:
   - ロゴ/アイコン（🎪）が中央上部に表示
   - タイトル「イベントに呼びたい キッチンカー・屋台を探すなら」が表示
   - 「Googleでログイン」ボタンが表示
   - 「メールアドレスでログイン」ボタンが表示
   - セパレーター（「または」）が表示
   - 「新規登録」ボタンが表示（グラデーション背景）
4. 「新規登録」ボタンをクリック
5. 認証方法選択画面が表示される（または直接認証画面へ）

**Google認証の場合**:
1. 「Googleでログイン」ボタンをクリック
2. Google認証画面にリダイレクトされる
3. Googleアカウントを選択
4. 認証を許可
5. `/auth/callback`にリダイレクトされる
6. セッションが作成される
7. 登録フォーム画面に遷移する

**メール認証の場合**:
1. 「メールアドレスでログイン」ボタンをクリック
2. メールアドレス・パスワード入力画面が表示される
3. 「新規登録」リンクをクリック
4. メールアドレス・パスワード入力画面が表示される
5. 以下を入力:
   - メールアドレス: `test-organizer@example.com`
   - パスワード: `password123`（6文字以上）
   - パスワード確認: `password123`
6. 「登録」ボタンをクリック
7. セッションが作成される（メール確認が無効の場合）
8. 登録フォーム画面に遷移する

**確認ポイント**:
- ✅ WelcomeScreenが正しく表示される（グラデーション背景、カード型レイアウト）
- ✅ ボタンがホバー時に適切に反応する（シャドウ拡大、transform）
- ✅ 新規登録ボタンがクリックできる
- ✅ Google認証が正常に完了する（リダイレクトが正しい）
- ✅ メール認証が正常に完了する
- ✅ 認証後、登録フォーム画面に遷移する
- ✅ セッションストレージに`auth_type`、`user_id`、`user_email`が保存される

#### 1-2. 登録フォーム入力（ステップ1: 情報登録）

**画面構成の確認**:
1. 進捗インジケーターが表示される:
   - ステップ1（情報登録）: 緑色の円
   - ステップ2（情報確認）: グレーの円
   - 線がステップ1まで緑色
2. タイトル「情報登録をしてください」が表示される
3. フォームが表示される

**正常系: 全項目入力**
1. 以下を順に入力:
   - **会社名**: `テスト株式会社`
     - 入力フィールドにフォーカス
     - 文字を入力
     - フォーカスを外す
     - エラーが表示されないことを確認
   - **名前**: `テスト太郎`
   - **性別**: プルダウンから「男性」を選択
   - **年齢**: `30`を入力
   - **電話番号**: `09012345678`を入力（ハイフンなしでも可）
   - **メールアドレス**: `test@example.com`を入力
2. 利用規約セクションを確認:
   - チェックボックスが表示される
   - 「利用規約」リンクが表示される
   - 「利用規約」リンクをクリック
   - 利用規約ページが表示される
   - 「元のページに戻る」ボタンで戻れる
3. 利用規約にチェックを入れる
4. 「次に進む」ボタンをクリック

**異常系: バリデーションテスト**
1. **空欄テスト**: 何も入力せずに「次に進む」をクリック
   - エラーメッセージ「入力してください」が各フィールドに表示される
   - エラーがあるフィールドのボーダーが赤色になる
   - ページがスクロールして最初のエラーフィールドにフォーカスされる
2. **電話番号テスト**: `123`（短すぎる）を入力
   - エラーメッセージが表示される
3. **メールアドレステスト**: `invalid-email`（形式不正）を入力
   - エラーメッセージが表示される
4. **年齢テスト**: `-1`または`101`を入力
   - エラーメッセージが表示される
5. **利用規約未チェック**: 全て入力して利用規約をチェックせずに「次に進む」をクリック
   - アラート「利用規約に同意してください。」が表示される

**確認ポイント**:
- ✅ フォームが正しく表示される（カード型、適切なスペーシング）
- ✅ 入力フィールドがフォーカス時に適切に反応する（ボーダー色変更、シャドウ）
- ✅ 必須項目のバリデーションが機能する
- ✅ エラーメッセージが適切に表示される（赤色、アイコン付き）
- ✅ エラーフィールドのボーダーが赤色になる
- ✅ 利用規約ページが表示される
- ✅ 利用規約チェックなしでは「次に進む」が無効化される
- ✅ 全て正しく入力すると「次に進む」でステップ2に遷移する
- ✅ 下書き自動保存が機能する（800msデバウンス）

#### 1-3. 情報確認画面（ステップ2: 情報確認）

**画面構成の確認**:
1. 進捗インジケーターが更新される:
   - ステップ1: 緑色の円（チェックマーク付き）
   - ステップ2: 緑色の円
   - 線がステップ2まで緑色
2. タイトル「情報確認をしてください」が表示される
3. 確認カードが表示される

**確認内容のチェック**:
1. 入力した内容が正しく表示されることを確認:
   - 会社名: `テスト株式会社`
   - 名前: `テスト太郎`
   - 性別: `男性`（「男」→「男性」に変換されている）
   - 年齢: `30歳`
   - 電話番号: `09012345678`
   - メールアドレス: `test@example.com`
2. 各項目が適切にフォーマットされていることを確認

**修正機能のテスト**:
1. 「修正する」ボタンをクリック
2. ステップ1（情報登録）に戻る
3. 入力内容が保持されていることを確認
4. 値を変更する（例: 年齢を`31`に変更）
5. 再度「次に進む」をクリック
6. ステップ2で変更が反映されていることを確認

**登録実行**:
1. 「登録する」ボタンをクリック
2. ローディング状態を確認（ボタンが「登録中...」に変わる、無効化される）
3. 登録処理が完了するまで待つ
4. アラート「登録が完了しました。運営側の承認をお待ちください。」が表示される

**確認ポイント**:
- ✅ 進捗インジケーターが正しく更新される
- ✅ 入力内容が正しく表示される（フォーマットも含む）
- ✅ 確認カードが適切にスタイリングされている（シャドウ、ボーダー）
- ✅ 「修正する」ボタンが機能する（ステップ1に戻る、入力内容保持）
- ✅ 「登録する」ボタンが機能する
- ✅ ローディング状態が適切に表示される
- ✅ 登録完了メッセージが表示される
- ✅ 下書きが削除される（登録成功時）

#### 1-4. 登録完了後の状態確認

**即座の確認**:
1. アラート「登録が完了しました。運営側の承認をお待ちください。」が表示される
2. アラートの「OK」をクリック
3. イベント管理画面（EventManagement）が表示される
4. 承認待ちバナーが表示される:
   - 背景色: `#fef3c7`（薄い黄色）
   - ボーダー: `#fbbf24`（黄色）
   - テキスト: `#92400e`（濃い茶色）
   - メッセージ: 「承認待ち: 運営側の承認後、イベントの掲載が可能になります。」
5. 「新しいイベントを掲載」ボタンが無効化されている（グレーアウト、`#9ca3af`）

**ページ再読み込みテスト**:
1. ブラウザの再読み込みボタンをクリック（またはF5キー）
2. ローディングスピナーが表示される
3. イベント管理画面が表示される
4. **重要**: 登録フォームに戻らないことを確認
5. 承認待ちバナーが表示される
6. セッションストレージに`is_registered: 'true'`が保存されていることを確認（F12 → Application → Session Storage）

**ブラウザ再起動テスト**:
1. ブラウザを完全に閉じる（すべてのタブを閉じる）
2. 再度ブラウザを開く
3. 主催者アプリにアクセス
4. ログイン画面が表示される
5. 同じアカウントでログイン（Googleまたはメールアドレス）
6. イベント管理画面が表示される
7. **重要**: 登録フォームに戻らないことを確認
8. 承認待ちバナーが表示される

**データベース確認（オプション）**:
1. Supabaseダッシュボードにアクセス
2. `organizers`テーブルを確認
3. 登録したデータが存在することを確認
4. `is_approved`が`false`であることを確認
5. `user_id`または`line_user_id`が正しく設定されていることを確認

**確認ポイント**:
- ✅ 登録完了メッセージが表示される
- ✅ イベント管理画面に遷移する（登録フォームに戻らない）
- ✅ 承認待ちバナーが表示される
- ✅ イベント作成ボタンが無効化されている
- ✅ ページ再読み込み後も状態が保持される
- ✅ ブラウザ再起動後も状態が保持される
- ✅ セッションストレージに正しい値が保存される
- ✅ データベースに正しく保存される

### 2. 承認待ち状態での動作

#### 2-1. イベント管理画面の表示
1. 承認待ち状態でログイン
2. イベント管理画面が表示されることを確認
3. 承認待ちバナーが表示されることを確認

**確認ポイント**:
- ✅ イベント管理画面が表示される（登録フォームに戻らない）
- ✅ 承認待ちバナーが表示される
- ✅ 「新しいイベントを掲載」ボタンが無効化されている（グレーアウト）

#### 2-2. イベント作成ボタンの動作
1. 「新しいイベントを掲載」ボタンをクリック
2. アラートが表示されることを確認

**確認ポイント**:
- ✅ ボタンがクリックできない（無効化されている）
- ✅ クリック時に「運営側の承認が必要です...」のアラートが表示される

### 3. 承認後の動作（運営側で承認後）

#### 3-1. 承認後のログイン
1. 運営側で主催者を承認
2. 主催者アプリでログイン
3. イベント管理画面が表示されることを確認

**確認ポイント**:
- ✅ 承認待ちバナーが表示されない
- ✅ 「新しいイベントを掲載」ボタンが有効化されている
- ✅ イベント一覧が表示される

### 4. イベント作成

#### 4-1. イベント作成フォーム

**前提条件**: 主催者が承認済み（`is_approved: true`）

**フォーム表示**:
1. 「新しいイベントを掲載」ボタンをクリック
2. イベント作成フォーム（EventForm）が表示される
3. フォームの構成を確認:
   - スクロール可能な長いフォーム
   - 複数のセクションに分かれている
   - 「保存」ボタンが下部に表示

**必須項目の入力**:
1. **基本情報セクション**:
   - イベント名: `テストイベント2024`
   - イベント名（ふりがな）: `てすといべんと2024`
   - ジャンル: プルダウンから「祭り」を選択
   - 静岡県職業能力開発協会関連: チェックボックス（任意）
   - 新聞掲載を希望しない: チェックボックス（任意）

2. **開催期間・時間セクション**:
   - 開催開始日: `2024-12-01`（日付ピッカーから選択）
   - 開催終了日: `2024-12-31`（日付ピッカーから選択）
   - 開催期間表示: `12月1日〜12月31日`
   - 開催期間備考: `雨天決行`（任意）
   - 開催時間: `10:00〜18:00`（任意）

3. **申し込み期間セクション**（任意）:
   - 申し込み開始日: `2024-11-01`
   - 申し込み終了日: `2024-11-30`
   - 申し込み期間表示: `11月1日〜11月30日`
   - 申し込み備考: `先着順`（任意）

4. **イベント内容セクション**:
   - リード文: `静岡県最大級のイベント`（100文字以内）
   - イベント説明: `様々なキッチンカーが出店します`（250文字以内）
   - イベント紹介文: `詳細な紹介文をここに入力します`（500文字以内、任意）

5. **画像セクション**（任意）:
   - メイン画像: 画像をアップロード
   - メイン画像キャプション: `メイン画像`
   - 追加画像1〜4: 画像をアップロード（任意）

6. **会場情報セクション**:
   - 会場名: `テスト会場`
   - 郵便番号: `123-4567`（任意）
   - 市区町村: `静岡市`（任意）
   - 町名: `テスト町`（任意）
   - 番地・建物名: `1-2-3`（任意）
   - 緯度・経度: `34.9756, 138.3826`（任意、地図から取得）

7. **URL情報セクション**（任意）:
   - ホームページURL: `https://example.com`
   - 関連ページURL: `https://example.com/related`

8. **連絡先情報セクション**:
   - 連絡先名: `テスト連絡先`
   - 連絡先電話: `09012345678`
   - 連絡先メール: `contact@example.com`（任意）

9. **その他情報セクション**（任意）:
   - 駐車場情報: `有料駐車場あり（500円/日）`
   - 料金情報: `入場無料`
   - 主催者情報: `テスト主催者`

**下書き自動保存の確認**:
1. いくつか項目を入力する
2. 800ms待つ
3. ブラウザの開発者ツール（F12）でNetworkタブを確認
4. `form_drafts`テーブルへのリクエストが送信されることを確認
5. ページを再読み込み
6. 入力内容が復元されることを確認

**保存実行**:
1. 「保存」ボタンをクリック
2. バリデーションエラーがないことを確認
3. ローディング状態を確認
4. 保存が完了する
5. イベント一覧画面に戻る
6. 作成したイベントが一覧に表示される

**バリデーションテスト**:
1. 必須項目を空欄にして「保存」をクリック
2. エラーメッセージが表示される
3. エラーフィールドにスクロールしてフォーカスされる

**確認ポイント**:
- ✅ フォームが正しく表示される
- ✅ 全ての入力フィールドが機能する
- ✅ 日付ピッカーが機能する
- ✅ 画像アップロードが機能する
- ✅ 下書き自動保存が機能する（800msデバウンス）
- ✅ 必須項目のバリデーションが機能する
- ✅ エラーメッセージが適切に表示される
- ✅ 保存が成功する
- ✅ イベント一覧に表示される
- ✅ 下書きが削除される（保存成功時）

#### 4-2. イベント編集
1. イベント一覧からイベントを選択
2. 「編集」ボタンをクリック
3. 内容を変更して保存

**確認ポイント**:
- ✅ 編集フォームが表示される
- ✅ 既存の値が入力されている
- ✅ 変更が保存される

### 5. 出店申し込み管理

#### 5-1. 申し込み一覧表示
1. イベント一覧からイベントを選択
2. 「申し込みを確認」ボタンをクリック
3. 申し込み一覧が表示される

**確認ポイント**:
- ✅ 申し込み一覧が表示される
- ✅ 出店者情報が表示される
- ✅ 申し込み日時が表示される
- ✅ ステータスが表示される

#### 5-2. 出店者詳細確認
1. 申し込み一覧から出店者を選択
2. 出店者詳細が表示される
3. 営業許可証画像が表示される

**確認ポイント**:
- ✅ 出店者情報が正しく表示される
- ✅ 書類画像が表示される
- ✅ 「期限確認」ボタンが表示される（AI機能はAPIキー待ち）

#### 5-3. 申し込み承認

**前提条件**: 出店申し込みが「承認待ち」状態であること

**承認実行**:
1. 申し込み一覧から「承認待ち」の申し込みを選択
2. 出店者詳細が表示される
3. 出店者情報を確認:
   - 名前、性別、年齢
   - 電話番号、メールアドレス
   - ジャンル情報
   - 書類画像（営業許可証、車検証など）
4. 「承認」ボタンをクリック
5. 確認ダイアログが表示される:
   - メッセージ: 「この申し込みを承認しますか？」
   - 「OK」と「キャンセル」ボタン
6. 「OK」をクリック
7. ローディング状態を確認
8. 承認が完了する
9. ステータスが「承認済み」に変わる
10. 通知が作成される（出店者へ）

**確認ダイアログのテスト**:
1. 「承認」ボタンをクリック
2. 確認ダイアログが表示される
3. 「キャンセル」をクリック
4. 承認が実行されないことを確認
5. 再度「承認」ボタンをクリック
6. 「OK」をクリック
7. 承認が実行される

**通知の確認**:
1. 出店者アプリでログイン
2. 通知一覧を確認
3. 「新しい通知があります」が表示される
4. 通知をクリック
5. 通知内容を確認:
   - タイトル: 「申し込みが承認されました」
   - メッセージ: 「[イベント名]への申し込みが承認されました。」
   - 日時が表示される

**確認ポイント**:
- ✅ 出店者詳細が正しく表示される
- ✅ 書類画像が正しく表示される
- ✅ 「承認」ボタンが機能する
- ✅ 確認ダイアログが表示される
- ✅ 「キャンセル」で承認がキャンセルされる
- ✅ 「OK」で承認が実行される
- ✅ ローディング状態が適切に表示される
- ✅ 承認が成功する
- ✅ ステータスが「承認済み」に変わる
- ✅ 通知が送信される（出店者へ）
- ✅ 通知が正しく表示される

#### 5-4. 申し込み却下
1. 「却下」ボタンをクリック
2. 確認ダイアログが表示される
3. 「OK」をクリック
4. 却下が完了する

**確認ポイント**:
- ✅ 確認ダイアログが表示される
- ✅ 却下が成功する
- ✅ ステータスが「却下」に変わる
- ✅ 通知が送信される（出店者へ）

#### 5-5. CSVエクスポート

**前提条件**: 承認済みの申し込みが1件以上あること

**エクスポート実行**:
1. 申し込み一覧画面で「CSV形式でダウンロード」ボタンをクリック
2. ブラウザのダウンロードが開始される
3. ダウンロードフォルダを確認

**ファイル内容の確認**:
1. ダウンロードしたCSVファイルを開く（Excel、Googleスプレッドシート、テキストエディタ）
2. ファイル名を確認:
   - 形式: `[イベント名]_[日付].csv`
   - 例: `テストイベント2024_2024-12-04.csv`
3. 文字化けがないことを確認（UTF-8 BOM付き）
4. ヘッダー行を確認:
   - 出店者名、メールアドレス、電話番号、ジャンル、申し込み日時など
5. データ行を確認:
   - 承認済みの出店者情報が正しく含まれている
   - 日付が正しい形式で表示されている
   - 文字列が正しくエンコードされている

**データ内容の詳細確認**:
1. 各列のデータが正しいことを確認:
   - 出店者名: 正しい名前が表示される
   - メールアドレス: 正しいメールアドレスが表示される
   - 電話番号: 正しい電話番号が表示される
   - ジャンル: 正しいジャンルが表示される
   - 申し込み日時: 正しい日時が表示される（ISO形式または読みやすい形式）
2. 複数の申し込みがある場合、全てのデータが含まれていることを確認
3. 承認待ち・却下の申し込みは含まれていないことを確認（承認済みのみ）

**エラーハンドリングの確認**:
1. 申し込みが0件の状態で「CSV形式でダウンロード」をクリック
2. 適切なエラーメッセージが表示される（または空のCSVがダウンロードされる）

**確認ポイント**:
- ✅ 「CSV形式でダウンロード」ボタンが表示される
- ✅ ボタンがクリックできる
- ✅ CSVファイルがダウンロードされる
- ✅ ファイル名が正しい形式である
- ✅ 文字化けしない（UTF-8 BOM付き）
- ✅ ヘッダー行が正しく表示される
- ✅ データ行が正しく含まれている
- ✅ 承認済みの申し込みのみが含まれている
- ✅ 日付・時刻が正しい形式で表示される

### 6. プロフィール編集
1. ナビゲーションから「登録情報」を選択
2. プロフィールが表示される
3. 「編集」ボタンをクリック
4. 情報を変更して保存

**確認ポイント**:
- ✅ プロフィールが表示される
- ✅ 編集フォームが表示される
- ✅ 変更が保存される

---

## 🏪 出店者アプリ - 動作確認手順

### 1. 新規登録フロー

#### 1-1. 新規登録開始
1. 出店者アプリにアクセス
2. 「新規登録」ボタンをクリック
3. 認証方法を選択（LINE、Google、または メールアドレス）
4. 認証を完了

**確認ポイント**:
- ✅ 新規登録ボタンが表示される
- ✅ 認証方法選択ができる（LINE、Google、Email）
- ✅ 認証が正常に完了する

#### 1-2. 登録フォーム入力（ステップ1: 基本情報）

**画面構成の確認**:
1. 進捗インジケーターが表示される:
   - ステップ1（情報登録）: 緑色の円
   - ステップ2（書類アップロード）: グレーの円
   - ステップ3（情報確認）: グレーの円
   - 線がステップ1まで緑色
2. タイトル「情報登録をしてください」が表示される
3. フォームが表示される

**正常系: 全項目入力**:
1. 以下を順に入力:
   - **名前**: `テスト花子`
   - **性別**: プルダウンから「女性」を選択
   - **年齢**: `25`を入力
   - **電話番号**: `09012345678`を入力（ハイフンなしでも可）
   - **メールアドレス**: `test@example.com`を入力
   - **ジャンル**: プルダウンから「フード」を選択
   - **より詳しいジャンル**: `たこ焼き`を入力
2. 利用規約セクションを確認:
   - チェックボックスが表示される
   - 「利用規約」リンクが表示される
   - 「利用規約」リンクをクリック
   - 利用規約ページが表示される
   - 「元のページに戻る」ボタンで戻れる
3. 利用規約にチェックを入れる
4. 「次に進む」ボタンをクリック

**異常系: バリデーションテスト**:
1. **空欄テスト**: 何も入力せずに「次に進む」をクリック
   - エラーメッセージ「入力してください」が各フィールドに表示される
   - エラーがあるフィールドのボーダーが赤色になる
   - ページがスクロールして最初のエラーフィールドにフォーカスされる
2. **電話番号テスト**: `123`（短すぎる）を入力
   - エラーメッセージが表示される
3. **メールアドレステスト**: `invalid-email`（形式不正）を入力
   - エラーメッセージが表示される
4. **年齢テスト**: `-1`または`101`を入力
   - エラーメッセージが表示される
5. **ジャンルテスト**: ジャンルを選択せずに「次に進む」をクリック
   - エラーメッセージが表示される
6. **より詳しいジャンルテスト**: 空欄で「次に進む」をクリック
   - エラーメッセージが表示される
7. **利用規約未チェック**: 全て入力して利用規約をチェックせずに「次に進む」をクリック
   - アラート「利用規約に同意してください。」が表示される

**確認ポイント**:
- ✅ フォームが正しく表示される（カード型、適切なスペーシング）
- ✅ 入力フィールドがフォーカス時に適切に反応する（ボーダー色変更、シャドウ）
- ✅ 必須項目のバリデーションが機能する
- ✅ エラーメッセージが適切に表示される（赤色、アイコン付き）
- ✅ エラーフィールドのボーダーが赤色になる
- ✅ 利用規約ページが表示される
- ✅ 利用規約チェックなしでは「次に進む」が無効化される
- ✅ 全て正しく入力すると「次に進む」でステップ2に遷移する
- ✅ 下書き自動保存が機能する（800msデバウンス）

#### 1-3. 書類アップロード（ステップ2: 書類アップロード）

**画面構成の確認**:
1. 進捗インジケーターが更新される:
   - ステップ1: 緑色の円（チェックマーク付き）
   - ステップ2: 緑色の円
   - ステップ3: グレーの円
   - 線がステップ2まで緑色
2. タイトル「書類をアップロードしてください」が表示される
3. 書類アップロードセクションが表示される

**画像アップロードのテスト**:
1. **営業許可証**:
   - 「営業許可証をアップロード」ボタンをクリック
   - ファイル選択ダイアログが表示される
   - 画像ファイルを選択（JPG、PNG、最大5MB推奨）
   - アップロードが開始される
   - ローディング状態が表示される
   - アップロードが完了する
   - 画像プレビューが表示される
   - 「期限確認」ボタンが表示される（AI機能、APIキー待ち）
   - 「削除」ボタンが表示される
2. **車検証**:
   - 同様の手順でアップロード
   - 画像プレビューが表示される
3. **自動車検査証**:
   - 同様の手順でアップロード
   - 画像プレビューが表示される
4. **PL保険**:
   - 同様の手順でアップロード
   - 画像プレビューが表示される
5. **火器類配置図**:
   - 同様の手順でアップロード
   - 画像プレビューが表示される

**画像削除のテスト**:
1. アップロードした画像の「削除」ボタンをクリック
2. 画像が削除される
3. プレビューが消える
4. 再度アップロードできる

**営業許可証AI確認のテスト**（APIキー設定済みの場合）:
1. 「期限確認」ボタンをクリック
2. ローディング状態が表示される（「期限を確認中...」）
3. API呼び出しが完了する
4. 結果が表示される:
   - `result: "yes"` または `"no"`
   - `expirationDate: "2024-12-31"`
   - `reason: "理由"`
5. 結果に応じてメッセージが表示される

**バリデーションテスト**:
1. 書類を1つでもアップロードせずに「次に進む」をクリック
2. エラーメッセージが表示される
3. エラーがある書類のアップロードエリアが赤色になる

**確認ポイント**:
- ✅ 進捗インジケーターが正しく更新される
- ✅ 各書類のアップロードボタンが表示される
- ✅ ファイル選択ダイアログが表示される
- ✅ 画像アップロードが機能する
- ✅ ローディング状態が適切に表示される
- ✅ 画像プレビューが正しく表示される
- ✅ 「削除」ボタンが機能する
- ✅ 「期限確認」ボタンが表示される（営業許可証のみ）
- ✅ 必須書類のバリデーションが機能する
- ✅ エラーメッセージが適切に表示される
- ✅ 全ての書類をアップロードすると「次に進む」でステップ3に遷移する

#### 1-4. 情報確認（ステップ3: 情報確認）

**画面構成の確認**:
1. 進捗インジケーターが更新される:
   - ステップ1: 緑色の円（チェックマーク付き）
   - ステップ2: 緑色の円（チェックマーク付き）
   - ステップ3: 緑色の円
   - 線がステップ3まで緑色
2. タイトル「情報確認をしてください」が表示される
3. 確認カードが表示される

**確認内容のチェック**:
1. **基本情報セクション**:
   - 名前: `テスト花子`
   - 性別: `女性`（「女」→「女性」に変換されている）
   - 年齢: `25歳`
   - 電話番号: `09012345678`
   - メールアドレス: `test@example.com`
   - ジャンル: `フード`
   - より詳しいジャンル: `たこ焼き`
2. **書類画像セクション**:
   - 営業許可証: 画像が表示される
   - 車検証: 画像が表示される
   - 自動車検査証: 画像が表示される
   - PL保険: 画像が表示される
   - 火器類配置図: 画像が表示される
3. 各画像が正しく表示されることを確認（画像が読み込まれる）

**修正機能のテスト**:
1. 「修正する」ボタンをクリック
2. ステップ1（基本情報）に戻る
3. 入力内容が保持されていることを確認
4. 値を変更する（例: 年齢を`26`に変更）
5. 「次に進む」をクリック
6. ステップ2で書類画像が保持されていることを確認
7. 「次に進む」をクリック
8. ステップ3で変更が反映されていることを確認

**登録実行**:
1. 「登録する」ボタンをクリック
2. ローディング状態を確認（ボタンが「登録中...」に変わる、無効化される）
3. 登録処理が完了するまで待つ
4. アラート「登録が完了しました。」が表示される

**確認ポイント**:
- ✅ 進捗インジケーターが正しく更新される
- ✅ 入力内容が正しく表示される（フォーマットも含む）
- ✅ 書類画像が正しく表示される
- ✅ 確認カードが適切にスタイリングされている
- ✅ 「修正する」ボタンが機能する（ステップ1に戻る、入力内容保持）
- ✅ 「登録する」ボタンが機能する
- ✅ ローディング状態が適切に表示される
- ✅ 登録完了メッセージが表示される
- ✅ 下書きが削除される（登録成功時）

#### 1-5. 登録完了後
1. 登録完了メッセージが表示される
2. イベント一覧画面が表示される
3. ページを再読み込み（F5）
4. ブラウザを閉じて再度開く
5. ログインする

**確認ポイント**:
- ✅ 登録完了後、イベント一覧が表示される
- ✅ ページ再読み込み後もイベント一覧が表示される（登録フォームに戻らない）
- ✅ ブラウザ再起動後もイベント一覧が表示される

### 2. イベント一覧閲覧

#### 2-1. イベント一覧表示
1. ログイン後、イベント一覧が表示される
2. イベントカードが表示される

**確認ポイント**:
- ✅ イベント一覧が表示される
- ✅ イベントカードに以下が表示される:
   - イベント名
   - 開催期間
   - 会場
   - ジャンル
   - 「申し込む」ボタン

### 3. イベント申し込み

#### 3-1. イベント申し込み

**前提条件**: 出店者が登録済みであること、イベントが存在すること

**申し込み実行**:
1. イベント一覧からイベントカードを確認
2. イベント情報を確認:
   - イベント名
   - 開催期間
   - 会場
   - ジャンル
3. 「申し込む」ボタンをクリック
4. 確認ダイアログが表示される:
   - メッセージ: `「[イベント名]」に申し込みますか？\n\n申し込み後、主催者による承認が必要です。`
   - 「OK」と「キャンセル」ボタン
5. 「OK」をクリック
6. ローディング状態を確認（ボタンが無効化される）
7. 申し込みが完了する
8. 成功メッセージが表示される（または画面が更新される）

**確認ダイアログのテスト**:
1. 「申し込む」ボタンをクリック
2. 確認ダイアログが表示される
3. 「キャンセル」をクリック
4. 申し込みが実行されないことを確認
5. 再度「申し込む」ボタンをクリック
6. 「OK」をクリック
7. 申し込みが実行される

**重複申し込みのテスト**:
1. 既に申し込み済みのイベントに再度「申し込む」をクリック
2. エラーメッセージが表示される（または申し込みが無効化される）

**通知の確認**:
1. 主催者アプリでログイン
2. 通知一覧を確認
3. 「新しい通知があります」が表示される
4. 通知をクリック
5. 通知内容を確認:
   - タイトル: 「新しい出店申し込み」
   - メッセージ: 「[イベント名]に新しい出店申し込みがありました。」
   - 日時が表示される

**申し込み状況の確認**:
1. 出店者アプリでナビゲーションから「申し込み」を選択
2. 申し込み一覧が表示される
3. 申し込んだイベントが表示される
4. ステータスが「承認待ち」であることを確認
5. 申し込み日時が表示される

**確認ポイント**:
- ✅ イベントカードが正しく表示される
- ✅ 「申し込む」ボタンが機能する
- ✅ 確認ダイアログが表示される
- ✅ 「キャンセル」で申し込みがキャンセルされる
- ✅ 「OK」で申し込みが実行される
- ✅ ローディング状態が適切に表示される
- ✅ 申し込みが成功する
- ✅ 通知が送信される（主催者へ）
- ✅ 申し込み状況画面で「承認待ち」と表示される
- ✅ 重複申し込みが防止される

### 4. 申し込み状況確認

#### 4-1. 申し込み一覧
1. ナビゲーションから「申し込み」を選択
2. 申し込み一覧が表示される

**確認ポイント**:
- ✅ 申し込み一覧が表示される
- ✅ イベント名、申し込み日時、ステータスが表示される
- ✅ ステータスが正しく表示される:
   - pending: 承認待ち
   - approved: 承認済み
   - rejected: 却下

### 5. 通知確認

#### 5-1. 通知一覧
1. ナビゲーションから「通知」を選択
2. 通知一覧が表示される
3. 未読通知数がバッジに表示される

**確認ポイント**:
- ✅ 通知一覧が表示される
- ✅ 未読通知数がバッジに表示される
- ✅ 通知をクリックすると既読になる
- ✅ 既読/未読が視覚的に区別される

### 6. プロフィール編集
1. ナビゲーションから「登録情報」を選択
2. プロフィールが表示される
3. 「編集」ボタンをクリック
4. 情報を変更して保存

**確認ポイント**:
- ✅ プロフィールが表示される
- ✅ 書類画像が表示される
- ✅ 編集フォームが表示される
- ✅ 変更が保存される

---

## 🔍 共通確認項目

### 認証関連

#### Googleログイン
1. 「Googleでログイン」ボタンをクリック
2. Google認証画面にリダイレクトされる
3. Googleアカウントを選択
4. 認証を許可
5. `/auth/callback`にリダイレクトされる
6. セッションが作成される
7. 適切な画面に遷移する

**確認ポイント**:
- ✅ Google認証画面が表示される
- ✅ 認証が正常に完了する
- ✅ リダイレクトが正しい（主催者アプリは主催者アプリに、出店者アプリは出店者アプリに）
- ✅ セッションが作成される
- ✅ セッションストレージに`auth_type: 'google'`が保存される

#### メールアドレスログイン
1. 「メールアドレスでログイン」ボタンをクリック
2. メールアドレス・パスワード入力画面が表示される
3. 登録済みのメールアドレス・パスワードを入力
4. 「ログイン」ボタンをクリック
5. セッションが作成される
6. 適切な画面に遷移する

**確認ポイント**:
- ✅ ログイン画面が表示される
- ✅ メールアドレス・パスワードが正しく入力できる
- ✅ ログインが成功する
- ✅ セッションが作成される
- ✅ セッションストレージに`auth_type: 'email'`が保存される

#### LINEログイン（出店者アプリのみ）
1. 「LINEでログイン」ボタンをクリック
2. LINE認証画面にリダイレクトされる
3. LINEアカウントでログイン
4. 認証を許可
5. `/auth/callback`にリダイレクトされる
6. セッションが作成される
7. 適切な画面に遷移する

**確認ポイント**:
- ✅ LINE認証画面が表示される
- ✅ 認証が正常に完了する
- ✅ リダイレクトが正しい（出店者アプリに戻る）
- ✅ セッションが作成される
- ✅ セッションストレージに`auth_type: 'line'`が保存される

#### ログアウト
1. ログイン状態でアプリを使用
2. ログアウト機能を実行（実装されている場合）
3. セッションが削除される
4. WelcomeScreenに戻る

**確認ポイント**:
- ✅ ログアウトが正常に動作する
- ✅ セッションが削除される
- ✅ WelcomeScreenが表示される

#### セッション保持
1. ログインする
2. ページを再読み込み（F5）
3. セッションが保持されていることを確認
4. ブラウザを閉じる
5. 再度ブラウザを開く
6. アプリにアクセス
7. セッションが保持されていることを確認（自動ログイン）

**確認ポイント**:
- ✅ ページ再読み込み後もセッションが保持される
- ✅ ブラウザ再起動後もセッションが保持される（Supabase Authの設定による）
- ✅ セッションストレージの値が保持される

### レスポンシブデザイン

#### モバイル（〜767px）
1. ブラウザの開発者ツール（F12）を開く
2. デバイスツールバーを有効化（Ctrl+Shift+M / Cmd+Shift+M）
3. 画面幅を320pxに設定（iPhone SEなど）
4. 各画面を確認:
   - WelcomeScreen
   - RegistrationForm
   - EventManagement / EventList
   - EventForm
   - EventApplications
   - Profile

**確認ポイント**:
- ✅ レイアウトが適切に調整される
- ✅ テキストが読みやすいサイズである
- ✅ ボタンがタップしやすいサイズである（48px以上）
- ✅ スクロールが正常に機能する
- ✅ ナビゲーションが適切に表示される

#### タブレット（768px〜1023px）
1. 画面幅を768pxに設定（iPadなど）
2. 各画面を確認

**確認ポイント**:
- ✅ レイアウトが適切に調整される
- ✅ コンテナの最大幅が適切である（600px）
- ✅ パディングが適切である（24px）

#### デスクトップ（1024px〜）
1. 画面幅を1024pxに設定
2. 各画面を確認
3. 画面幅を1280pxに設定（大型デスクトップ）
4. 各画面を確認

**確認ポイント**:
- ✅ レイアウトが適切に調整される
- ✅ コンテナの最大幅が適切である（1024px: 800px, 1280px: 1000px）
- ✅ パディングが適切である（1024px: 32px, 1280px: 40px）
- ✅ カード型レイアウトが適切に表示される（シャドウ、ボーダー半径）
- ✅ ホバー効果が機能する

### エラーハンドリング

#### ネットワークエラー
1. ブラウザの開発者ツール（F12）を開く
2. Networkタブで「Offline」を選択
3. フォーム送信やデータ取得を実行
4. エラーメッセージが表示される

**確認ポイント**:
- ✅ ネットワークエラー時に適切なメッセージが表示される
- ✅ ユーザーに分かりやすいエラーメッセージが表示される
- ✅ リトライ機能がある（または手動でリトライできる）

#### バリデーションエラー
1. フォームで必須項目を空欄にする
2. 送信ボタンをクリック
3. エラーメッセージが表示される

**確認ポイント**:
- ✅ エラーメッセージが適切に表示される
- ✅ エラーフィールドが視覚的に区別される（赤色ボーダー）
- ✅ エラーメッセージが分かりやすい
- ✅ 最初のエラーフィールドにスクロール・フォーカスされる

#### 認証エラー
1. 間違ったパスワードでログインを試みる
2. エラーメッセージが表示される

**確認ポイント**:
- ✅ 認証エラーが適切に処理される
- ✅ エラーメッセージが表示される
- ✅ セキュリティを考慮したメッセージ（具体的な情報を漏らさない）

#### データ取得エラー
1. Supabaseの接続を切断（開発環境でテスト）
2. データ取得を実行
3. エラーメッセージが表示される

**確認ポイント**:
- ✅ データ取得エラーが適切に処理される
- ✅ エラーメッセージが表示される
- ✅ ローディング状態が解除される

---

## 🐛 既知の問題・制約事項

1. **営業許可証AI確認**: APIキー設定待ち（機能は実装済み）
2. **アニメーション**: ユーザー要望により削除済み
3. **Google Sheets連携**: 削除済み（CSVエクスポートに置き換え）

---

## 📝 確認結果記録

### 主催者アプリ
- [ ] 新規登録フロー
- [ ] 承認待ち状態での動作
- [ ] 承認後の動作
- [ ] イベント作成
- [ ] イベント編集
- [ ] 出店申し込み管理
- [ ] CSVエクスポート
- [ ] プロフィール編集

### 出店者アプリ
- [ ] 新規登録フロー
- [ ] イベント一覧閲覧
- [ ] イベント申し込み
- [ ] 申し込み状況確認
- [ ] 通知確認
- [ ] プロフィール編集

### 共通
- [ ] 認証関連
- [ ] レスポンシブデザイン
- [ ] エラーハンドリング

---

**確認日**: ___________  
**確認者**: ___________  
**備考**: ___________

