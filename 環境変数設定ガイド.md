# 環境変数設定ガイド

## store-web（出店者アプリ）

### 必須環境変数（ログイン機能に必要）

1. **NEXT_PUBLIC_SUPABASE_URL**
   - SupabaseプロジェクトのURL
   - 用途: Supabase接続（全機能で使用）

2. **NEXT_PUBLIC_SUPABASE_ANON_KEY**
   - Supabaseの匿名キー
   - 用途: Supabase接続（全機能で使用）

3. **NEXT_PUBLIC_LINE_LOGIN_CHANNEL_ID**
   - LINE Login Channel ID
   - 用途: LINEログイン

4. **LINE_LOGIN_CHANNEL_SECRET**
   - LINE Login Channel Secret（サーバーサイドのみ）
   - 用途: LINEログイン（API Route `/api/auth/line-login`で使用）

5. **NEXT_PUBLIC_LINE_LOGIN_REDIRECT_URI**
   - LINEログインのコールバックURL
   - 例: `https://store-web.vercel.app/auth/callback`
   - 用途: LINEログイン後のリダイレクト

6. **NEXT_PUBLIC_APP_URL**
   - アプリのベースURL
   - 例: `https://store-web.vercel.app`
   - 用途: メール確認、パスワードリセットのリダイレクトURL生成

### オプション環境変数（機能別）

#### 通知機能用
- **SUPABASE_SERVICE_ROLE_KEY**
  - Supabaseのサービスロールキー
  - 用途: 通知作成API（`/api/notifications/create`）で使用

- **RESEND_API_KEY**
  - Resend APIキー
  - 用途: メール送信（`/api/notifications/send-email`）で使用

- **RESEND_FROM_EMAIL**
  - 送信元メールアドレス
  - デフォルト: `noreply@tomorrow-event-platform.com`
  - 用途: メール送信時の送信元アドレス

---

## organizer-web（主催者アプリ）

### 必須環境変数（ログイン機能に必要）

1. **NEXT_PUBLIC_SUPABASE_URL**
   - SupabaseプロジェクトのURL
   - 用途: Supabase接続（全機能で使用）

2. **NEXT_PUBLIC_SUPABASE_ANON_KEY**
   - Supabaseの匿名キー
   - 用途: Supabase接続（全機能で使用）

3. **NEXT_PUBLIC_LINE_LOGIN_CHANNEL_ID**
   - LINE Login Channel ID
   - 用途: LINEログイン

4. **LINE_LOGIN_CHANNEL_SECRET**
   - LINE Login Channel Secret（サーバーサイドのみ）
   - 用途: LINEログイン（API Route `/api/auth/line-login`で使用）

5. **NEXT_PUBLIC_LINE_LOGIN_REDIRECT_URI**
   - LINEログインのコールバックURL
   - 例: `https://organizer-web.vercel.app/auth/callback`
   - 用途: LINEログイン後のリダイレクト

6. **NEXT_PUBLIC_ORGANIZER_URL**
   - 主催者アプリのベースURL
   - 例: `https://organizer-web.vercel.app`
   - 用途: Googleログイン、メール確認のリダイレクトURL生成

7. **NEXT_PUBLIC_APP_URL**
   - アプリのベースURL（NEXT_PUBLIC_ORGANIZER_URLと同じ値でOK）
   - 例: `https://organizer-web.vercel.app`
   - 用途: パスワードリセット、メール確認のリダイレクトURL生成

### オプション環境変数（機能別）

#### 通知機能用
- **SUPABASE_SERVICE_ROLE_KEY**
  - Supabaseのサービスロールキー
  - 用途: 通知作成API、イベント管理APIで使用

- **RESEND_API_KEY**
  - Resend APIキー
  - 用途: メール送信（通知、イベント締切通知）で使用

- **RESEND_FROM_EMAIL**
  - 送信元メールアドレス
  - デフォルト: `noreply@tomorrow-event-platform.com`
  - 用途: メール送信時の送信元アドレス

#### イベント応募者エクスポート機能用（Google Sheets連携）
- **GOOGLE_SERVICE_ACCOUNT_EMAIL**
  - Googleサービスアカウントのメールアドレス
  - 用途: Google Sheets API認証

- **GOOGLE_PRIVATE_KEY**
  - Googleサービスアカウントの秘密鍵
  - 注意: 改行文字を`\n`として保存（Vercelでは自動的に処理される）
  - 用途: Google Sheets API認証

- **GOOGLE_SPREADSHEET_ID**
  - テンプレート用のGoogleスプレッドシートID
  - 用途: イベント応募者データのエクスポート先

---

## 認証方法別の環境変数要件

### LINEログイン
- `NEXT_PUBLIC_LINE_LOGIN_CHANNEL_ID`（必須）
- `LINE_LOGIN_CHANNEL_SECRET`（必須）
- `NEXT_PUBLIC_LINE_LOGIN_REDIRECT_URI`（必須）

### Googleログイン
- 環境変数不要（Supabase DashboardでGoogleプロバイダーを有効化するだけ）

### メールアドレスログイン
- 環境変数不要（Supabaseのメール認証設定のみ）

---

## Vercelでの設定方法

1. Vercelプロジェクトの「Settings」→「Environment Variables」に移動
2. 上記の環境変数を追加
3. 環境（Production, Preview, Development）を選択
4. 「Save」をクリック
5. 再デプロイを実行

---

## 注意事項

- `LINE_LOGIN_CHANNEL_SECRET`と`SUPABASE_SERVICE_ROLE_KEY`は**サーバーサイドのみ**で使用されるため、`NEXT_PUBLIC_`プレフィックスは付けません
- `NEXT_PUBLIC_`プレフィックスが付いている環境変数は、クライアントサイドでも使用可能です
- Googleログインとメールアドレスログインは、Supabase Dashboardでの設定のみで動作します（追加の環境変数は不要）

