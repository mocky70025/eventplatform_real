# 画像表示エラー修正手順

## 問題

画像のアップロードは成功しているが、画像が表示されない。コンソールに以下のエラーが表示される：

```
[ImageUpload] Failed to load image: https://xszkbfwqtwpsfnwdfjak.supabase.co/storage/v1/object/public/exhibitor-documents/...
```

## 原因

Supabase Storageのバケットが**公開アクセス**に設定されていない、またはRLSポリシーが正しく設定されていない可能性があります。

## 解決方法

### ステップ1: Supabase Dashboardでバケットを公開設定にする

1. Supabase Dashboardにログイン
2. 左メニューから「Storage」を選択
3. `exhibitor-documents`バケットを選択
4. 「Settings」タブを開く
5. **「Public bucket」**のトグルを**ON**にする
6. 同様に`event-images`バケットも公開設定にする

### ステップ2: SQLを実行してRLSポリシーを修正

1. Supabase Dashboardの左メニューから「SQL Editor」を選択
2. `supabase_storage_public_access_fix.sql`の内容をコピー＆ペースト
3. 「Run」ボタンをクリックして実行

### ステップ3: 動作確認

1. ブラウザでアプリを開く
2. 画像をアップロードする
3. 画像が表示されることを確認
4. ブラウザのコンソール（F12）でエラーが出ていないか確認

## 補足

- バケットを公開設定にすると、URLを知っている誰でも画像にアクセスできます
- セキュリティが必要な場合は、認証付きアクセスに変更する必要があります
- 現在の実装では、LINE Loginを使用しているため、Supabaseの認証セッションがないため、公開アクセスが必要です

